python   How fix   UnicodeDecodeError   ascii  codec can t decode byte    Stack Overflow Stack Overflow new Stack Overflow Salary Calculator Find developers like earning  Calculate salary Questions Developer Jobs Tags Users current community help chat Stack Overflow Meta Stack Overflow communities Sign log customize list  stack exchange communities company blog Tour Start quick overview site Help Center Detailed answers questions might Meta Discuss workings policies site About Us Learn Stack Overflow company Business Learn hiring developers posting ads us Log In Sign Up Learn  Share  Build Each month     million developers come Stack Overflow learn  share knowledge  build careers  Join world s largest developer community  Google Facebook Display name Email address Password By registering  agree privacy policy terms service  How fix   UnicodeDecodeError   ascii  codec can t decode byte  Ask Question vote     vote favorite     as    ngokevin site  nano content blog          test chinese mkd as    ngokevin site  wok Traceback  most recent call last   File   usr local bin wok   line    Engine   File   usr local lib python    site packages wok engine py   line      init self load pages   File   usr local lib python    site packages wok engine py   line      load pages p   Page from file os path join root  f   self options  self  renderer  File   usr local lib python    site packages wok page py   line      from file page meta  content     page renderer render page original  File   usr local lib python    site packages wok renderers py   line     render return markdown plain  Markdown plugins  File   usr local lib python    site packages markdown init py   line      markdown return md convert text  File   usr local lib python    site packages markdown init py   line      convert source   unicode source  UnicodeDecodeError   ascii  codec can t decode byte  xe  position    ordinal range          Note  Markdown accepts unicode input  How fix it  In python based static blog apps  Chinese post published successfully  Such app  http   github com vrypan bucket   In site http   bc  brite biz   Chinese post published successfully  python python     share improve question edited Dec             Kasper Souren            asked Jan             fisherman           possible duplicate UnicodeDecodeError   ascii  codec can t decode byte  xe  position     ordinal range        GreenAsJade Jan              add comment      Answers    active oldest votes vote     vote Finally I got it  as   usr local lib python    site packages  cat sitecustomize py   encoding utf  import sys reload sys  sys setdefaultencoding  utf    Let check  as    ngokevin site  python Python        default  Dec                    GCC        linux  Type  help    copyright    credits   license  information      import sys     reload sys   module  sys   built in       sys getdefaultencoding    utf       The shows default encoding python utf   Then error more  share improve answer edited Jan            BrechtDeMan            answered Jan              fisherman             I try couldn t change encoding permanently  Once quit python console start again  encoding still   DerekY May                Thanks  But need reload sys importing it    Dmitry Narkevich Jun                DmitryNarkevich  Illusive setdefaultencoding function  It deleted Python startup since never part proper release first place  apparently    predi Aug              Uf  best answer ever  Until moment I forced include       coding  utf       begining document  This way much easier works charm   Andr s Monge Moreno Aug               miraculixx Python   s default encoding UTF   Unicode strings default str  it s overdue there  In Python   x  Unicode state transition  would ve dangerous assume encoding converting bytes Unicodes  Therefore  Py  s default encoding ASCII deliberate choice changing default encoding requires deliberate hack reloading sys  The correct way banish encoding errors Py  unambiguously decode encode  byte  strings Unicode  conversions necessary   assume strings UTF   encoded    Alastair McCormack Feb                show   comments vote     vote tl dr Don t decode encode willy nilly Don t assume strings UTF   encoded Try convert strings Unicode strings soon possible code Python   x   The Long Version Without seeing source it s difficult know root cause  I ll speak generally  UnicodeDecodeError   ascii  codec can t decode byte generally happens try convert Python   x str contains non ASCII Unicode string without specifying encoding original string  In brief  Unicode strings entirely separate type Python string contain encoding  They hold Unicode point codes therefore hold Unicode point across entire spectrum  Strings contain encoded text  beit UTF    UTF     ISO         GBK  Big  etc  Strings decoded Unicode Unicodes encoded strings  Files text data always transferred encoded strings  The Markdown module authors probably use unicode    where exception thrown  quality gate rest code   convert ASCII re wrap existing Unicodes strings new Unicode string  The Markdown authors can t know encoding incoming string rely decode strings Unicode strings passing Markdown  Unicode strings declared code using u prefix strings  E g      my u   u my  nic d  str ng      type my u   type  unicode   Unicode strings may also come file  databases network modules  When happens  don t need worry encoding  Gotchas Conversion str Unicode happen even don t explicitly call unicode    The following scenarios cause UnicodeDecodeError exceptions  unicode        explicit conversion without encoding u The currency is      format        new style format string Unicode string   Python try convert value string Unicode first u The currency is   s          old style format string Unicode string   Python try convert value string Unicode first u The currency is            append string Unicode   Python try convert string Unicode first Examples In following diagram  see word caf  encoded either  UTF     Cp      encoding depending terminal type  In examples  caf regular ascii  In UTF      encoded using two bytes  In  Cp          xE   which also happens Unicode point value  it s coincidence    The correct decode   invoked conversion Python Unicode successfull  In diagram  decode   called ascii  which calling unicode   without encoding given   As ASCII can t contain bytes greater  x F  throw UnicodeDecodeError exception  The Unicode Sandwich It s good practice form Unicode sandwich code  decode incoming data Unicode strings  work Unicodes  encode strs way out  This saves worrying encoding strings middle code  Input   Decode Source code If need bake non ASCII source code  create Unicode strings prefixing string u  E g  u Z rich  To allow Python decode source code  need add encoding header match actual encoding file  For example  file encoded  UTF     would use    encoding  utf   This necessary non ASCII source code  Files Usually non ASCII data received file  The io module provides TextWrapper decodes file fly  using given encoding  You must use correct encoding file   can t easily guessed  For example  UTF   file  import io io open  my utf  file txt    r   encoding  utf     my file  my unicode string   my file read   my unicode string would suitable passing Markdown  If UnicodeDecodeError read   line  you ve probably used wrong encoding value  CSV Files The Python     CSV module support non ASCII characters    Help hand  however  https   pypi python org pypi backports csv  Use like pass opened file it  backports import csv import io io open  my utf  file txt    r   encoding  utf     my file  row csv reader my file   yield row Databases Most Python database drivers return data Unicode  usually require little configuration  Always use Unicode strings SQL queries  MySQL In connection string add  charset  utf    use unicode True PostgreSQL Add  psycopg  extensions register type psycopg  extensions UNICODE  psycopg  extensions register type psycopg  extensions UNICODEARRAY  HTTP Web pages encoded encoding  The Content type header contain charset field hint encoding  The content decoded manually value  Alternatively  Python Requests returns Unicodes response text  Manually If must decode strings manually  simply my string decode encoding   encoding appropriate encoding  Python   x supported codecs given here  Standard Encodings  Again  get UnicodeDecodeError you ve probably got wrong encoding  The meat sandwich Work Unicodes would normal strs  Output stdout   printing print writes stdout stream  Python tries configure encoder stdout Unicodes encoded console s encoding  For example  Linux shell s locale en GB UTF    output encoded UTF    On Windows  limited  bit code page  An incorrectly configured console  corrupt locale  lead unexpected print errors  PYTHONIOENCODING environment variable force encoding stdout  Files Just like input  io open used transparently convert Unicodes encoded byte strings  Database The configuration reading allow Unicodes written directly  Python   Python   Unicode capable Python   x is  regular str Unicode string old str bytes  The default encoding UTF     decode   byte string without giving encoding  Python   uses UTF   encoding  This probably fixes     people s Unicode problems  Further  open   operates text mode default  returns decoded str  Unicode ones   The encoding derived locale  tends UTF   Un x systems   bit code page  windows       Windows boxes  share improve answer edited Jun         answered Feb              Alastair McCormack     k      add comment   vote     vote This classic  unicode issue   I believe explaining beyond scope StackOverflow answer completely explain happening  It well explained here  In brief summary  passed something interpreted string bytes something needs decode Unicode characters  default codec  ascii  failing  The presentation I pointed provides advice avoiding this  Make code  unicode sandwich   In Python    use  from   future   import unicode literals  helps  Update  code fixed  OK   variable  source  bytes  It clear question got   maybe read web form  In case  encoded ascii  python trying convert unicode assuming are  You need explicitly tell encoding is  This means need know encoding is  That always easy  depends entirely string came from  You could experiment common encodings   example UTF    You tell unicode   encoding second parameter  source   unicode source   utf     share improve answer edited Aug             Community     answered Jan             GreenAsJade              it s still headache mr GreenAsJade can u give concrete solution    fisherman Jan               Are asking  how I user blog avoid problem    Or question  how I fix code problem doesn t happen     GreenAsJade Jan                mr greenasjade  put  source   unicode source   utf         fisherman Jan                Weird     positive feedback year  suddenly two negative votes   Huh    GreenAsJade May               use currentFile   open filename   rt   encoding  latin    currentFile   open filename   rt   encoding  utf       see here  stackoverflow com a                    irudyak Oct                show   comments vote    vote In cases  check default encoding  print sys getdefaultencoding     returns using ASCII  If change UTF    doesn t work  depending content variable  I found another way  import sys reload sys  sys setdefaultencoding  Cp       share improve answer edited Nov             ohaal            answered Nov             Davy       ty  worked problem python throwing UnicodeDecodeError var   u   vary large string      user        Jul                Thanks but Cp     works    zionpi Jun          add comment   vote   vote I find best always convert unicode   difficult achieve practice you d check convert every argument every function method ever write includes form string processing  So I came following approach either guarantee unicodes byte strings  either input  In short  include use following lambdas    guarantee unicode string  u   lambda t  t decode  UTF      replace   isinstance t  str  else  uu   lambda  tt  tuple  u t  tt    guarantee byte string UTF  encoding  u    lambda t  t encode  UTF      replace   isinstance t  unicode  else  uu    lambda  tt  tuple  u  t  tt  Examples  text  Some string codes        like Z rich  utext u Some string codes        like Z rich  print       u   uu  print  u text   type  u text   print  u utext   type  u utext   print  uu text  utext   type  uu text  utext   print      u   uu   print  u  text   type  u  text   print  u  utext   type  u  utext   print  uu  text  utext   type  uu  text  utext       formatting  always use  u    uu   print  Some unknown input  s     u text  print  Multiple inputs  s   s     uu text  text    string format sure always work unicode strings print u Also works formats      format  u text   print u Also works formats         format   uu text  text         use  u   uu   string format expects byte strings print  Also works formats      format  u  text   print  Also works formats         format   uu  text  text   Here s reasoning this  share improve answer answered Jan             miraculixx            Hi  Python   function  u is nt working value  Ita      Martin Jun              Ok  start  reasoning   print unicode u Z rich   encoding  UTF     complain  But amazingly can t encode unicode ext UTF    unicode   encode  decodes can t decode Unicode   it s decoded already    Alastair McCormack Feb               AlastairMcCormack You welcome improve post  If however prefer sprinkle alleged superieriority everyone else share opinion insight  I m quite frankly interested  Thank you    miraculixx Feb                 miraculixx I m sorry  I didn t mean come across like jerk  Worrying decoding encoding everytime use string code unnecessary    Alastair McCormack Feb              add comment   vote   vote This error happens mainly context requires unicode string passed string  convert code check string already unicode case get TypeError  decoding Unicode supported trying convert unicode string already unicode  Ideally check convert below  isinstance input string  str   input string   unicode input string   utf     Adding above  remove unsupported characters  It changes type non ascii still remains  In order remove characters use below  isinstance input string  str   input string   input string decode  ascii    ignore   encode  ascii    note  removes character encodes back string  elif isinstance input string  unicode   input string   input string encode  ascii    ignore   share improve answer edited Aug          answered Aug          Aishwarya Subramanian      add comment   vote   vote I got problem string  Pasteler  a Mallorca  I solved with  unicode  Pasteler  a Mallorca    latin     share improve answer answered May         Alle Pavesi     add comment   vote   vote I problem didn t work Python    I followed solved problem  enc   sys getdefaultencoding   file   open menu   r   encoding   enc  You set encoding reading writing file  share improve answer answered Aug          Reihan amn        add comment   vote   vote Encode converts unicode object string object  I think trying encode string object  first convert result unicode object encode unicode object  utf     example result   yourFunction   result decode   encode  utf     share improve answer answered Sep          RAFI AFRIDI     add comment   vote   vote In Django          Python       project I frequent UnicodeDecodeError exceptions  mainly I try feed unicode strings logging  I made helper function arbitrary objects basically format   bit ascii strings replacing characters table      I think it s best solution since default encoding ascii  and don t want change it  do  def encode for logging c  encoding  ascii    isinstance c  basestring   return c encode encoding   replace   elif isinstance c  Iterable   c       v c  c  append encode for logging v  encoding   return c  else  return encode for logging unicode c     share improve answer edited Mar         Karl Richter            answered Jan         Paul Bormans        add comment   vote   vote add top python file  convert code file Unicode fixed case  code many times       coding utf       share improve answer answered Jun          Sarath Ak       add comment   Your Answer draft saved draft discarded Sign log Sign using Google Sign using Facebook Sign using Email Password Post guest Name Email Post guest Name Email discard By posting answer  agree privacy policy terms service  Not answer you re looking for  Browse questions tagged python python     ask question  asked   years    months ago viewed         times active    days ago Linked   UnicodeDecodeError   ascii  codec can t decode byte  x   position      ordinal range         ascii  codec can t decode byte  xcb bs   UnicodeDecodeError   ascii  codec can t decode byte Textranking code    UnicodeDecodeError   ascii  codec can t decode byte  xe  position     ordinal range         Switching Python   causing UnicodeDecodeError   Python     UnicodeDecodeError   ascii  codec can t decode byte   Cannot save animation matplotlib  Windows permission denied   UnicodeDecodeError   ascii  codec can t decode byte  xa  position    ordinal range         UnicodeEncodeError   ascii  codec can t encode character error using writerow map   Python escape special characters INSERT INTO mysql see linked questions  Related   UnicodeDecodeError   ascii  codec can t decode byte  xef position     UnicodeDecodeError   utf   codec can t decode byte  x c  UnicodeDecodeError   ascii  codec can t decode byte  xc  UnicodeDecodeError   ascii  codec can t decode byte Python  UnicodeDecodeError   ascii  codec can t decode byte  xe  position     ordinal range      UnicodeDecodeError   ascii  codec can t decode byte  xec position  UnicodeDecodeError   ascii  codec can t decode byte   NLTK  how fix UnicodeDecodeError   ascii  codec can t decode byte windows UnicodeDecodeError   ascii  codec can t decode byte  xe  position    ordinal range      How fix UnicodeDecodeError   ascii  codec can t decode byte  Hot Network Questions User can t navigate webpage UI due permissions  able navigate page pasting URL  How I protect this  Getting two  or  one half  outputs single pin Why can t ditch aircraft sea  Proof absolute value identities How create type lighting used many Elena Shuminova s pictures  Can PhD supervisor take unpublished ideas student s dissertation  Animate dead command communication  How work  Should one avoid using phrase  note that  math writings  Co worker knows small fact blowing proportion I apologise advance Appropriateness dedicating thesis Jewish mathematician died concentration camp In Harry Potter  boggart really hurt you  How Navier Stokes equations found first place can t solve them  What Alt Left  Monopoly  Do I Collect Rent If I Am In Jail  Customizing fancyhdr Is device driver Linux program process library  Can character survive fall   miles up  Why drink water directly river you d considered pagan  How communicate co workers don t say  bless you  I sneeze  QGIS   How calculate distance matrix km units How I shorten python code  What Bhagavad Gita says responding hurt you  How water evaporate completely room temperature  hot questions question feed lang py Stack Overflow Questions Jobs Developer Jobs Directory Salary Calculator Help Mobile Stack Overflow Business Talent Ads Enterprise Insights Company About Press Work Here Legal Privacy Policy Contact Us Stack Exchange Network Technology Life   Arts Culture   Recreation Science Other Stack Overflow Server Fault Super User Web Applications Ask Ubuntu Webmasters Game Development TeX   LaTeX Software Engineering Unix   Linux Ask Different  Apple  WordPress Development Geographic Information Systems Electrical Engineering Android Enthusiasts Information Security Bitcoin Database Administrators Drupal Answers SharePoint User Experience Mathematica Salesforce ExpressionEngine  Answers Stack Overflow em Portugu s Blender Network Engineering Cryptography Code Review Magento Software Recommendations Signal Processing Emacs Raspberry Pi Stack Overflow            Programming Puzzles   Code Golf Stack Overflow en espa ol Ethereum Data Science Arduino      Photography Science Fiction   Fantasy Graphic Design Movies   TV Music  Practice   Theory Worldbuilding Seasoned Advice  cooking  Home Improvement Personal Finance   Money Academia Law      English Language   Usage Skeptics Mi Yodeya  Judaism  Travel Christianity English Language Learners Japanese Language Arqade  gaming  Bicycles Role playing Games Anime   Manga Puzzling Motor Vehicle Maintenance   Repair      MathOverflow Mathematics Cross Validated  stats  Theoretical Computer Science Physics Chemistry Biology Computer Science Philosophy      Meta Stack Exchange Stack Apps API Data Area    Blog Facebook Twitter LinkedIn site design   logo        Stack Exchange Inc  user contributions licensed cc by sa     attribution required  rev                  Stack Overflow works best JavaScript enabled